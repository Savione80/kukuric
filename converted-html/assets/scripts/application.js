// Generated by CoffeeScript 1.8.0
(function() {
  if (!window.console) {
    window.console = {
      log: (function(obj) {})
    };
  }

  $(function() {
    var body, carousel, carousels, getIOSVersion, i, social_sharing, tabController, tab_controllers, video_detail, _i, _j, _ref, _ref1;
    window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
    getIOSVersion = function() {
      var v;
      if (/iP(hone|od|ad)/.test(navigator.platform)) {
        v = navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
        return [parseInt(v[1], 10), parseInt(v[2], 10), parseInt(v[3] || 0, 10)];
      } else {
        return false;
      }
    };
    window.has_ios = getIOSVersion();
    window.is_mobile = navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/Android/i) ? true : false;
    window.is_iphone = navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPod/i) ? true : false;
    window.is_ipad = navigator.userAgent.match(/iPad/i) ? true : false;
    if (window.is_mobile) {
      $('body').addClass('deviceMobile');
    }
    window.breakpointer = {
      s: 290,
      m: 650,
      l: 959
    };
    window.transEndEventNames = {
      WebkitTransition: "webkitTransitionEnd",
      MozTransition: "transitionend",
      transition: "transitionend"
    };
    window.transEndEventName = window.transEndEventNames[Modernizr.prefixed("transition")];
    Modernizr.addTest("highres", function() {
      var dpr;
      dpr = window.devicePixelRatio || (window.screen.deviceXDPI / window.screen.logicalXDPI) || 1;
      return !!(dpr > 1);
    });
    if (typeof Modernizr.prefixed("transform") === 'string') {
      window.prefixedTransform = Modernizr.prefixed("transform").replace(/([A-Z])/g, function(str, m1) {
        return "-" + m1.toLowerCase();
      }).replace(/^ms-/, "-ms-");
    }
    window.helpers = {
      convertISOtoDuration: (function(_this) {
        return function(iso_code) {
          var duration, minutes, seconds;
          iso_code = iso_code.replace('PT', '');
          minutes = iso_code.substring(0, iso_code.indexOf('M'));
          if (minutes === '') {
            minutes = "00";
          } else if (parseInt(minutes) < 10) {
            minutes = "0" + minutes;
          }
          seconds = iso_code.substring(iso_code.indexOf('M') + 1, iso_code.indexOf('S'));
          if (seconds === '') {
            seconds = "00";
          } else if (parseInt(seconds) < 10) {
            seconds = "0" + seconds;
          }
          duration = "" + minutes + ":" + seconds;
          return duration;
        };
      })(this),
      createPlayerAPI: (function(_this) {
        return function() {
          var firstScriptTag, tag;
          tag = document.createElement('script');
          tag.src = "https://www.youtube.com/iframe_api";
          firstScriptTag = document.getElementsByTagName('script')[0];
          return firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        };
      })(this),
      covertDataSize: (function(_this) {
        return function(size) {
          var _size;
          switch (size) {
            case 'small':
              _size = 'medium';
              break;
            case 'medium':
              size = 'high';
              break;
            case 'large':
              size = 'standard';
              break;
            case 'superLarge':
              size = 'maxres';
              break;
            case 'thumb':
              size = 'default';
          }
          return size;
        };
      })(this),
      getUserId: (function(_this) {
        return function() {
          return 'AoSRFU_naDYSN4hVEaP8bg';
        };
      })(this),
      getChannelId: (function(_this) {
        return function() {
          return 'UCAoSRFU_naDYSN4hVEaP8bg';
        };
      })(this),
      getAPIkey: (function(_this) {
        return function() {
          return 'AIzaSyBJTy9_2hSHFz5atKsAuL_3EOvVLqLV12Y';
        };
      })(this),
      getReqVideosListUrl: (function(_this) {
        return function() {
          return 'https://www.googleapis.com/youtube/v3/videos';
        };
      })(this),
      getReqPlaylistItemsUrl: (function(_this) {
        return function() {
          return 'https://www.googleapis.com/youtube/v3/playlistItems';
        };
      })(this),
      getEcomServiceUrl: (function(_this) {
        return function() {
          return '';
        };
      })(this),
      setIframeHeight: (function(_this) {
        return function() {
          var new_height;
          new_height = JSON.stringify({
            "height": "" + ($('body').height()) + "px"
          });
          if (new_height !== window.actualIframeHeight) {
            top.postMessage(new_height, "https://www.youtube.com/");
            return window.actualIframeHeight = new_height;
          }
        };
      })(this),
      detectIE8: (function(_this) {
        return function() {
          var IE_version, msie, ua;
          ua = window.navigator.userAgent;
          msie = ua.indexOf('MSIE ');
          IE_version = 0;
          if (msie > 0) {
            IE_version = parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);
          }
          if (IE_version !== 0 && IE_version < 9) {
            return true;
          } else {
            return false;
          }
        };
      })(this)
    };
    social_sharing = $('.j-socialsharing');
    if (social_sharing.length === 1) {
      new SocialSharing(social_sharing);
    }
    body = $('body');
    video_detail = body.find('.videoDetail');
    if (video_detail.length === 1) {
      new PlaylistManager(video_detail);
    } else {
      new ItemManager(body);
      carousels = $('.js-carousel');
      if (carousels.length > 0) {
        for (i = _i = 0, _ref = carousels.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
          carousel = $(carousels[i]);
          new Carousel(carousel);
        }
      }
    }
    tab_controllers = $('.j-tab');
    if (tab_controllers.length > 0) {
      for (i = _j = 0, _ref1 = tab_controllers.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {
        tabController = $(tab_controllers[i]);
        new TabController(tabController);
      }
    }
    return $(window).resize(window.helpers.setIframeHeight);
  });

  $(window).load(function() {
    return window.helpers.setIframeHeight();
  });

}).call(this);
